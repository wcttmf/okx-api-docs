<h3 id="block-trading-websocket-public-channel-public-structure-block-trades-channel">Public structure block trades channel</h3>
<p>Retrieve the recent block trades data in OKX. All the legs in the same block trade are included in the same update. The data will be pushed 15 minutes after the block trade execution.</p>
<h4 id="block-trading-websocket-public-channel-public-structure-block-trades-channel-url-path">URL Path</h4>
<p>/ws/v5/business</p>
<blockquote>
<p>Request Example</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="o">{</span>
  <span class="s2">"id"</span>: <span class="s2">"1512"</span>,
  <span class="s2">"op"</span>: <span class="s2">"subscribe"</span>,
  <span class="s2">"args"</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">"channel"</span>: <span class="s2">"public-struc-block-trades"</span>
    <span class="o">}</span>
  <span class="o">]</span>
<span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">okx.websocket.WsPublicAsync</span> <span class="kn">import</span> <span class="n">WsPublicAsync</span>

<span class="k">def</span> <span class="nf">callbackFunc</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">ws</span> <span class="o">=</span> <span class="n">WsPublicAsync</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s">"wss://wspap.okx.com:8443/ws/v5/business"</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">start</span><span class="p">()</span>
    <span class="n">args</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s">"channel"</span><span class="p">:</span> <span class="s">"public-struc-block-trades"</span>
        <span class="p">}</span>
    <span class="p">]</span>

    <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">subscribe</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">callbackFunc</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">asyncio</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

    <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">unsubscribe</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">callbackFunc</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">asyncio</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</code></pre></div><h4 id="block-trading-websocket-public-channel-public-structure-block-trades-channel-request-parameters">Request Parameters</h4>
<table><thead>
<tr>
<th style="text-align: left">Parameter</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">id</td>
<td style="text-align: left">String</td>
<td style="text-align: left">No</td>
<td>Unique identifier of the message  <br/>Provided by client. It will be returned in response message for identifying the corresponding request. <br/>A combination of case-sensitive alphanumerics, all numbers, or all letters of up to 32 characters.</td>
</tr>
<tr>
<td style="text-align: left">op</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Yes</td>
<td>Operation<br/><code>subscribe</code><br/><code>unsubscribe</code><br/></td>
</tr>
<tr>
<td style="text-align: left">args</td>
<td style="text-align: left">Array of objects</td>
<td style="text-align: left">Yes</td>
<td>List of subscribed channels</td>
</tr>
<tr>
<td style="text-align: left">&gt; channel</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Yes</td>
<td>Channel name<br/><code>public-struc-block-trades</code></td>
</tr>
</tbody></table>
<blockquote>
<p>Successful Response Example</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1512"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"arg"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"channel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"public-struc-block-trades"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"connId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a4d3ae55"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Failure Response Example</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1512"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60012"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid request: {</span><span class="se">\"</span><span class="s2">op</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">subscribe</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">argss</span><span class="se">\"</span><span class="s2">:[{ </span><span class="se">\"</span><span class="s2">channel</span><span class="se">\"</span><span class="s2"> : </span><span class="se">\"</span><span class="s2">public-struc-block-trades</span><span class="se">\"</span><span class="s2">"</span><span class="p">}]}</span><span class="s2">",
  "</span><span class="err">connId</span><span class="s2">": "</span><span class="err">a</span><span class="mi">4</span><span class="err">d</span><span class="mi">3</span><span class="err">ae</span><span class="mi">55</span><span class="s2">"
}
</span></code></pre></div><h4 id="block-trading-websocket-public-channel-public-structure-block-trades-channel-response-parameters">Response parameters</h4>
<table><thead>
<tr>
<th style="text-align: left">Parameter</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">id</td>
<td style="text-align: left">String</td>
<td style="text-align: left">No</td>
<td>Unique identifier of the message</td>
</tr>
<tr>
<td style="text-align: left">event</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Yes</td>
<td>Operation<br/><code>subscribe</code><br/><code>unsubscribe</code><br/><code>error</code></td>
</tr>
<tr>
<td style="text-align: left">arg</td>
<td style="text-align: left">Object</td>
<td style="text-align: left">No</td>
<td>Subscribed channel</td>
</tr>
<tr>
<td style="text-align: left">&gt; channel</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Yes</td>
<td>Channel name<br/><code>public-struc-block-trades</code></td>
</tr>
<tr>
<td style="text-align: left">code</td>
<td style="text-align: left">String</td>
<td style="text-align: left">No</td>
<td>Error code</td>
</tr>
<tr>
<td style="text-align: left">msg</td>
<td style="text-align: left">String</td>
<td style="text-align: left">No</td>
<td>Error message</td>
</tr>
<tr>
<td style="text-align: left">connId</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Yes</td>
<td>WebSocket connection ID</td>
</tr>
</tbody></table>
<blockquote>
<p>Push Data Example</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"arg"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"channel"</span><span class="p">:</span><span class="s2">"public-struc-block-trades"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">

            </span><span class="nl">"cTime"</span><span class="p">:</span><span class="s2">"1608267227834"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"blockTdId"</span><span class="p">:</span><span class="s2">"1802896"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"legs"</span><span class="p">:[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"px"</span><span class="p">:</span><span class="s2">"0.323"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"sz"</span><span class="p">:</span><span class="s2">"25.0"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"instId"</span><span class="p">:</span><span class="s2">"BTC-USD-20220114-13250-C"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"side"</span><span class="p">:</span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"tradeId"</span><span class="p">:</span><span class="s2">"15102"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"px"</span><span class="p">:</span><span class="s2">"0.666"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"sz"</span><span class="p">:</span><span class="s2">"25"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"instId"</span><span class="p">:</span><span class="s2">"BTC-USD-20220114-21125-C"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"side"</span><span class="p">:</span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"tradeId"</span><span class="p">:</span><span class="s2">"15103"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h4 id="block-trading-websocket-public-channel-public-structure-block-trades-channel-push-data-parameters">Push data parameters</h4>
<table><thead>
<tr>
<th><strong>Parameters</strong></th>
<th><strong>Types</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead><tbody>
<tr>
<td>arg</td>
<td>Object</td>
<td>Successfully subscribed channel</td>
</tr>
<tr>
<td>&gt; channel</td>
<td>String</td>
<td>Channel name</td>
</tr>
<tr>
<td>data</td>
<td>Array of objects</td>
<td>Subscribed data</td>
</tr>
<tr>
<td>&gt; cTime</td>
<td>String</td>
<td>The time the trade was executed. Unix timestamp in milliseconds.</td>
</tr>
<tr>
<td>&gt; blockTdId</td>
<td>String</td>
<td>Block trade ID.</td>
</tr>
<tr>
<td>&gt; legs</td>
<td>Array of objects</td>
<td>Legs of trade</td>
</tr>
<tr>
<td>&gt;&gt; instId</td>
<td>String</td>
<td>Instrument ID, e.g. BTC-USDT-SWAP</td>
</tr>
<tr>
<td>&gt;&gt; px</td>
<td>String</td>
<td>The price the leg executed</td>
</tr>
<tr>
<td>&gt;&gt; sz</td>
<td>String</td>
<td>Trade quantity <br/>For spot trading, the unit is base currency<br/>For <code>FUTURES</code>/<code>SWAP</code>/<code>OPTION</code>, the unit is contract.</td>
</tr>
<tr>
<td>&gt;&gt; side</td>
<td>String</td>
<td>The direction of the leg from the Takers perspective. Valid value can be <code>buy</code> or <code>sell</code>.</td>
</tr>
<tr>
<td>&gt;&gt; tradeId</td>
<td>String</td>
<td>Last traded ID.</td>
</tr>
</tbody></table>
