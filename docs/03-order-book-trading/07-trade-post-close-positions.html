<h3 id="order-book-trading-trade-post-close-positions">POST / Close positions</h3>
<p>Close the position of an instrument via a market order.</p>
<h4 id="order-book-trading-trade-post-close-positions-rate-limit-20-requests-per-2-seconds">Rate Limit: 20 requests per 2 seconds</h4><h4 id="order-book-trading-trade-post-close-positions-rate-limit-rule-except-options-user-id-instrument-id">Rate limit rule (except Options): User ID + Instrument ID</h4><h4 id="order-book-trading-trade-post-close-positions-rate-limit-rule-options-only-user-id-instrument-family">Rate limit rule (Options only): User ID + Instrument Family</h4><h4 id="order-book-trading-trade-post-close-positions-permission-trade">Permission: Trade</h4><h4 id="order-book-trading-trade-post-close-positions-http-request">HTTP Request</h4>
<p><code>POST /api/v5/trade/close-position</code></p>
<blockquote>
<p>Request Example</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>POST /api/v5/trade/close-position
body
<span class="o">{</span>
    <span class="s2">"instId"</span>:<span class="s2">"BTC-USDT-SWAP"</span>,
    <span class="s2">"mgnMode"</span>:<span class="s2">"cross"</span>
<span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">okx.Trade</span> <span class="k">as</span> <span class="n">Trade</span>

<span class="c1"># API initialization
</span><span class="n">apikey</span> <span class="o">=</span> <span class="s">"YOUR_API_KEY"</span>
<span class="n">secretkey</span> <span class="o">=</span> <span class="s">"YOUR_SECRET_KEY"</span>
<span class="n">passphrase</span> <span class="o">=</span> <span class="s">"YOUR_PASSPHRASE"</span>

<span class="n">flag</span> <span class="o">=</span> <span class="s">"1"</span>  <span class="c1"># Production trading: 0, Demo trading: 1
</span>
<span class="n">tradeAPI</span> <span class="o">=</span> <span class="n">Trade</span><span class="p">.</span><span class="n">TradeAPI</span><span class="p">(</span><span class="n">apikey</span><span class="p">,</span> <span class="n">secretkey</span><span class="p">,</span> <span class="n">passphrase</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="n">flag</span><span class="p">)</span>

<span class="c1"># Close the position of an instrument via a market order
</span><span class="n">result</span> <span class="o">=</span> <span class="n">tradeAPI</span><span class="p">.</span><span class="n">close_positions</span><span class="p">(</span>
    <span class="n">instId</span><span class="o">=</span><span class="s">"BTC-USDT-SWAP"</span><span class="p">,</span>
    <span class="n">mgnMode</span><span class="o">=</span><span class="s">"cross"</span>
<span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</code></pre></div><h4 id="order-book-trading-trade-post-close-positions-request-parameters">Request Parameters</h4>
<table><thead>
<tr>
<th style="text-align: left">Parameter</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Required</th>
<th style="text-align: left">Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">instId</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Yes</td>
<td style="text-align: left">Instrument ID</td>
</tr>
<tr>
<td style="text-align: left">posSide</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Conditional</td>
<td style="text-align: left">Position side <br/>This parameter can be omitted in <code>net</code> mode, and the default value is <code>net</code>. You can only fill with <code>net</code>.<br/>This parameter must be filled in under the <code>long/short</code> mode. Fill in <code>long</code> for close-long and <code>short</code> for close-short.</td>
</tr>
<tr>
<td style="text-align: left">mgnMode</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Yes</td>
<td style="text-align: left">Margin mode<br/><code>cross</code> <code>isolated</code></td>
</tr>
<tr>
<td style="text-align: left">ccy</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Conditional</td>
<td style="text-align: left">Margin currency, required in the case of closing <code>cross</code> <code>MARGIN</code> position for <code>Futures mode</code>.</td>
</tr>
<tr>
<td style="text-align: left">autoCxl</td>
<td style="text-align: left">Boolean</td>
<td style="text-align: left">No</td>
<td style="text-align: left">Whether any pending orders for closing out needs to be automatically canceled when close position via a market order.<br/><code>false</code> or <code>true</code>, the default is <code>false</code>.</td>
</tr>
<tr>
<td style="text-align: left">clOrdId</td>
<td style="text-align: left">String</td>
<td style="text-align: left">No</td>
<td style="text-align: left">Client-supplied ID<br/>A combination of case-sensitive alphanumerics, all numbers, or all letters of up to 32 characters.</td>
</tr>
<tr>
<td style="text-align: left">tag</td>
<td style="text-align: left">String</td>
<td style="text-align: left">No</td>
<td style="text-align: left">Order tag<br/>A combination of case-sensitive alphanumerics, all numbers, or all letters of up to 16 characters.</td>
</tr>
</tbody></table>
<blockquote>
<p>Response Example</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"clOrdId"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="nl">"instId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USDT-SWAP"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"posSide"</span><span class="p">:</span><span class="w"> </span><span class="s2">"long"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h4 id="order-book-trading-trade-post-close-positions-response-parameters">Response Parameters</h4>
<table><thead>
<tr>
<th style="text-align: left"><strong>Parameter</strong></th>
<th style="text-align: left"><strong>Type</strong></th>
<th style="text-align: left"><strong>Description</strong></th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">instId</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Instrument ID</td>
</tr>
<tr>
<td style="text-align: left">posSide</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Position side</td>
</tr>
<tr>
<td style="text-align: left">clOrdId</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Client-supplied ID<br/>A combination of case-sensitive alphanumerics, all numbers, or all letters of up to 32 characters.</td>
</tr>
<tr>
<td style="text-align: left">tag</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Order tag<br/>A combination of case-sensitive alphanumerics, all numbers, or all letters of up to 16 characters.</td>
</tr>
</tbody></table>
<aside class="notice">
if there are any pending orders for closing out and the orders do not need to be automatically canceled, it will return an error code and message to prompt users to cancel pending orders before closing the positions. <br/>
</aside>
