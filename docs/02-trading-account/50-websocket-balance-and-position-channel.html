<h3 id="trading-account-websocket-balance-and-position-channel">Balance and position channel</h3>
<p>Retrieve account balance and position information. Data will be pushed when triggered by events such as filled order, funding transfer.<br/>
This channel applies to getting the account cash balance and the change of position asset ASAP. <br/>
Concurrent connection to this channel will be restricted by the following rules: <a href="/docs-v5/en/#overview-websocket-connection-count-limit">WebSocket connection count limit</a>.</p>
<h4 id="trading-account-websocket-balance-and-position-channel-url-path">URL Path</h4>
<p>/ws/v5/private (required login)</p>
<blockquote>
<p>Request Example </p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="o">{</span>
    <span class="s2">"id"</span>: <span class="s2">"1512"</span>,
    <span class="s2">"op"</span>: <span class="s2">"subscribe"</span>,
    <span class="s2">"args"</span>: <span class="o">[{</span>
        <span class="s2">"channel"</span>: <span class="s2">"balance_and_position"</span>
    <span class="o">}]</span>
<span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>

<span class="kn">from</span> <span class="nn">okx.websocket.WsPrivateAsync</span> <span class="kn">import</span> <span class="n">WsPrivateAsync</span>

<span class="k">def</span> <span class="nf">callbackFunc</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>

    <span class="n">ws</span> <span class="o">=</span> <span class="n">WsPrivateAsync</span><span class="p">(</span>
        <span class="n">apiKey</span> <span class="o">=</span> <span class="s">"YOUR_API_KEY"</span><span class="p">,</span>
        <span class="n">passphrase</span> <span class="o">=</span> <span class="s">"YOUR_PASSPHRASE"</span><span class="p">,</span>
        <span class="n">secretKey</span> <span class="o">=</span> <span class="s">"YOUR_SECRET_KEY"</span><span class="p">,</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s">"wss://ws.okx.com:8443/ws/v5/private"</span><span class="p">,</span>
        <span class="n">useServerTime</span><span class="o">=</span><span class="bp">False</span>
    <span class="p">)</span>
    <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">start</span><span class="p">()</span>
    <span class="n">args</span> <span class="o">=</span> <span class="p">[{</span>
        <span class="s">"channel"</span><span class="p">:</span> <span class="s">"balance_and_position"</span>
    <span class="p">}]</span>

    <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">subscribe</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">callbackFunc</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">asyncio</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

    <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">unsubscribe</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">callbackFunc</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">asyncio</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>


<span class="n">asyncio</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</code></pre></div><h4 id="trading-account-websocket-balance-and-position-channel-request-parameters">Request Parameters</h4>
<table><thead>
<tr>
<th style="text-align: left">Parameter</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Required</th>
<th style="text-align: left">Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">id</td>
<td style="text-align: left">String</td>
<td style="text-align: left">No</td>
<td style="text-align: left">Unique identifier of the message  <br/>Provided by client. It will be returned in response message for identifying the corresponding request. <br/>A combination of case-sensitive alphanumerics, all numbers, or all letters of up to 32 characters.</td>
</tr>
<tr>
<td style="text-align: left">op</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Yes</td>
<td style="text-align: left">Operation<br/><code>subscribe</code><br/><code>unsubscribe</code><br/></td>
</tr>
<tr>
<td style="text-align: left">args</td>
<td style="text-align: left">Array of objects</td>
<td style="text-align: left">Yes</td>
<td style="text-align: left">List of subscribed channels</td>
</tr>
<tr>
<td style="text-align: left">&gt; channel</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Yes</td>
<td style="text-align: left">Channel name<br/><code>balance_and_position</code></td>
</tr>
</tbody></table>
<blockquote>
<p>Response Example </p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1512"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"arg"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"channel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"balance_and_position"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"connId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a4d3ae55"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Failure Response Example</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1512"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60012"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid request: {</span><span class="se">\"</span><span class="s2">op</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">subscribe</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">argss</span><span class="se">\"</span><span class="s2">:[{ </span><span class="se">\"</span><span class="s2">channel</span><span class="se">\"</span><span class="s2"> : </span><span class="se">\"</span><span class="s2">balance_and_position</span><span class="se">\"</span><span class="s2">}]}"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"connId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a4d3ae55"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h4 id="trading-account-websocket-balance-and-position-channel-response-parameters">Response parameters</h4>
<table><thead>
<tr>
<th style="text-align: left">Parameter</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Required</th>
<th style="text-align: left">Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">id</td>
<td style="text-align: left">String</td>
<td style="text-align: left">No</td>
<td style="text-align: left">Unique identifier of the message</td>
</tr>
<tr>
<td style="text-align: left">event</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Yes</td>
<td style="text-align: left">Operation<br/><code>subscribe</code><br/><code>unsubscribe</code><br/><code>error</code></td>
</tr>
<tr>
<td style="text-align: left">arg</td>
<td style="text-align: left">Object</td>
<td style="text-align: left">No</td>
<td style="text-align: left">List of subscribed channels</td>
</tr>
<tr>
<td style="text-align: left">&gt; channel</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Yes</td>
<td style="text-align: left">Channel name<br/><code>balance_and_position</code></td>
</tr>
<tr>
<td style="text-align: left">code</td>
<td style="text-align: left">String</td>
<td style="text-align: left">No</td>
<td style="text-align: left">Error code</td>
</tr>
<tr>
<td style="text-align: left">msg</td>
<td style="text-align: left">String</td>
<td style="text-align: left">No</td>
<td style="text-align: left">Error message</td>
</tr>
<tr>
<td style="text-align: left">connId</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Yes</td>
<td style="text-align: left">WebSocket connection ID</td>
</tr>
</tbody></table>
<blockquote>
<p>Push Data Example</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"arg"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"channel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"balance_and_position"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"77982378738415879"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
        </span><span class="nl">"pTime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1597026383085"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"snapshot"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"balData"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
            </span><span class="nl">"ccy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"cashBal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"uTime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1597026383085"</span><span class="w">
        </span><span class="p">}],</span><span class="w">
        </span><span class="nl">"posData"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
            </span><span class="nl">"posId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1111111111"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"tradeId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"instId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USD-191018"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"instType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FUTURES"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"mgnMode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cross"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"posSide"</span><span class="p">:</span><span class="w"> </span><span class="s2">"long"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"pos"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"ccy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"posCcy"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="nl">"avgPx"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3320"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"nonSettleAvgPx"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="nl">"settledPnl"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="nl">"uTime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1597026383085"</span><span class="w">
        </span><span class="p">}],</span><span class="w">
        </span><span class="nl">"trades"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
            </span><span class="nl">"instId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USD-191018"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"tradeId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
        </span><span class="p">}]</span><span class="w">
    </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h4 id="trading-account-websocket-balance-and-position-channel-push-data-parameters">Push data parameters</h4>
<table><thead>
<tr>
<th style="text-align: left"><strong>Parameter</strong></th>
<th style="text-align: left"><strong>Type</strong></th>
<th style="text-align: left"><strong>Description</strong></th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">arg</td>
<td style="text-align: left">Object</td>
<td style="text-align: left">Channel to subscribe to</td>
</tr>
<tr>
<td style="text-align: left">&gt; channel</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Channel name</td>
</tr>
<tr>
<td style="text-align: left">&gt; uid</td>
<td style="text-align: left">String</td>
<td style="text-align: left">User Identifier</td>
</tr>
<tr>
<td style="text-align: left">data</td>
<td style="text-align: left">Array of objects</td>
<td style="text-align: left">Subscribed data</td>
</tr>
<tr>
<td style="text-align: left">&gt; pTime</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Push time of both balance and position information, millisecond format of Unix timestamp, e.g. <code>1597026383085</code></td>
</tr>
<tr>
<td style="text-align: left">&gt; eventType</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Event Type<br/><code>snapshot</code><br/><code>delivered</code><br/><code>exercised</code><br/><code>transferred</code><br/><code>filled</code><br/><code>liquidation</code><br/><code>claw_back</code><br/><code>adl</code><br/><code>funding_fee</code><br/><code>adjust_margin</code><br/><code>set_leverage</code><br/><code>interest_deduction</code><br/><code>settlement</code></td>
</tr>
<tr>
<td style="text-align: left">&gt; balData</td>
<td style="text-align: left">Array of objects</td>
<td style="text-align: left">Balance data</td>
</tr>
<tr>
<td style="text-align: left">&gt;&gt; ccy</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Currency</td>
</tr>
<tr>
<td style="text-align: left">&gt;&gt; cashBal</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Cash Balance</td>
</tr>
<tr>
<td style="text-align: left">&gt;&gt; uTime</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Update time, Unix timestamp format in milliseconds, e.g. <code>1597026383085</code></td>
</tr>
<tr>
<td style="text-align: left">&gt; posData</td>
<td style="text-align: left">Array of objects</td>
<td style="text-align: left">Position data</td>
</tr>
<tr>
<td style="text-align: left">&gt;&gt; posId</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Position ID</td>
</tr>
<tr>
<td style="text-align: left">&gt;&gt; tradeId</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Last trade ID</td>
</tr>
<tr>
<td style="text-align: left">&gt;&gt; instId</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Instrument ID, e.g <code>BTC-USD-180213</code></td>
</tr>
<tr>
<td style="text-align: left">&gt;&gt; instType</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Instrument type</td>
</tr>
<tr>
<td style="text-align: left">&gt;&gt; mgnMode</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Margin mode<br/><code>isolated</code>, <code>cross</code></td>
</tr>
<tr>
<td style="text-align: left">&gt;&gt; avgPx</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Average open price</td>
</tr>
<tr>
<td style="text-align: left">&gt;&gt; ccy</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Currency used for margin</td>
</tr>
<tr>
<td style="text-align: left">&gt;&gt; posSide</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Position side<br/><code>long</code>, <code>short</code>, <code>net</code></td>
</tr>
<tr>
<td style="text-align: left">&gt;&gt; pos</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Quantity of positions. In the isolated margin mode, when doing manual transfers, a position with pos of <code>0</code> will be generated after the deposit is transferred</td>
</tr>
<tr>
<td style="text-align: left">&gt;&gt; baseBal</td>
<td style="text-align: left">String</td>
<td style="text-align: left"><del>Base currency balance, only applicable to <code>MARGIN</code>（Quick Margin Mode）</del>(Deprecated)</td>
</tr>
<tr>
<td style="text-align: left">&gt;&gt; quoteBal</td>
<td style="text-align: left">String</td>
<td style="text-align: left"><del>Quote currency balance, only applicable to <code>MARGIN</code>（Quick Margin Mode）</del>(Deprecated)</td>
</tr>
<tr>
<td style="text-align: left">&gt;&gt; posCcy</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Position currency, only applicable to MARGIN positions.</td>
</tr>
<tr>
<td style="text-align: left">&gt;&gt; nonSettleAvgPx</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Non-Settlement entry price<br/>The non-settlement entry price only reflects the average price at which the position is opened or increased.<br/>Applicable to <code>FUTURES</code> <code>cross</code></td>
</tr>
<tr>
<td style="text-align: left">&gt;&gt; settledPnl</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Accumulated settled P&amp;L (calculated by settlement price)<br/>Applicable to <code>FUTURES</code> <code>cross</code></td>
</tr>
<tr>
<td style="text-align: left">&gt;&gt; uTime</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Update time, Unix timestamp format in milliseconds, e.g. <code>1597026383085</code></td>
</tr>
<tr>
<td style="text-align: left">&gt; trades</td>
<td style="text-align: left">Array of objects</td>
<td style="text-align: left">Details of trade</td>
</tr>
<tr>
<td style="text-align: left">&gt;&gt; instId</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Instrument ID, e.g. <code>BTC-USDT</code></td>
</tr>
<tr>
<td style="text-align: left">&gt;&gt; tradeId</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Trade ID</td>
</tr>
</tbody></table>
<aside class="notice"> 
Only balData will be pushed if only the account balance changes; only posData will be pushed if only the position changes.
</aside>
<aside class="notice">
<br/> - Initial snapshot: Only either position with non-zero position quantity or cash balance with non-zero quantity will be pushed. If the data is too large to be sent in a single push message, it will be split into multiple messages.
<br/> - For example, if you subscribe according to all currencies and the user has 5 currency balances that are not 0 and 20 positions, all 20 positions data and 5 currency balances data will be pushed in initial snapshot; Subsequently when there is change in pos of a position, only the data of that position will be pushed triggered by this change.
</aside>
