<h3 id="public-data-websocket-adl-warning-channel">ADL warning channel</h3>
<p>Auto-deleveraging warning channel.</p>
<p>In the <code>normal</code> state, data will be pushed once every minute to display the balance of insurance fund and etc.</p>
<p>In the warning state or when there is ADL risk (<code>warning/adl</code>), data will be pushed every second to display information such as the real-time decline rate of insurance fund.</p>
<p>For more ADL details, please refer to <a href="https://www.okx.com/help/iv-introduction-to-auto-deleveraging-adl">Introduction to Auto-deleveraging</a></p>
<h4 id="public-data-websocket-adl-warning-channel-url-path">URL Path</h4>
<p>/ws/v5/public</p>
<blockquote>
<p>Request Example</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="o">{</span>
    <span class="s2">"id"</span>: <span class="s2">"1512"</span>,
    <span class="s2">"op"</span>: <span class="s2">"subscribe"</span>,
    <span class="s2">"args"</span>: <span class="o">[{</span>
        <span class="s2">"channel"</span>: <span class="s2">"adl-warning"</span>,
        <span class="s2">"instType"</span>: <span class="s2">"FUTURES"</span>,
        <span class="s2">"instFamily"</span>: <span class="s2">"BTC-USDT"</span>
    <span class="o">}]</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">okx.websocket.WsPublicAsync</span> <span class="kn">import</span> <span class="n">WsPublicAsync</span>

<span class="k">def</span> <span class="nf">callbackFunc</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">ws</span> <span class="o">=</span> <span class="n">WsPublicAsync</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s">"wss://wspap.okx.com:8443/ws/v5/public"</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">start</span><span class="p">()</span>
    <span class="n">args</span> <span class="o">=</span> <span class="p">[{</span>
        <span class="s">"channel"</span><span class="p">:</span> <span class="s">"adl-warning"</span><span class="p">,</span>
        <span class="s">"instType"</span><span class="p">:</span> <span class="s">"FUTURES"</span><span class="p">,</span>
        <span class="s">"instFamily"</span><span class="p">:</span> <span class="s">"BTC-USDT"</span>
    <span class="p">}]</span>

    <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">subscribe</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">callbackFunc</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">asyncio</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

    <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">unsubscribe</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">callbackFunc</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">asyncio</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</code></pre></div><h4 id="public-data-websocket-adl-warning-channel-request-parameters">Request Parameters</h4>
<table><thead>
<tr>
<th style="text-align: left">Parameter</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">id</td>
<td style="text-align: left">String</td>
<td style="text-align: left">No</td>
<td>Unique identifier of the message  <br/>Provided by client. It will be returned in response message for identifying the corresponding request. <br/>A combination of case-sensitive alphanumerics, all numbers, or all letters of up to 32 characters.</td>
</tr>
<tr>
<td style="text-align: left">op</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Yes</td>
<td>Operation<br/><code>subscribe</code><br/><code>unsubscribe</code><br/></td>
</tr>
<tr>
<td style="text-align: left">args</td>
<td style="text-align: left">Array of objects</td>
<td style="text-align: left">Yes</td>
<td>List of subscribed channels</td>
</tr>
<tr>
<td style="text-align: left">&gt; channel</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Yes</td>
<td>Channel name<br/><code>adl-warning</code></td>
</tr>
<tr>
<td style="text-align: left">&gt; instType</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Yes</td>
<td>Instrument type<br/><code>SWAP</code><br/><code>FUTURES</code><br/><code>OPTION</code></td>
</tr>
<tr>
<td style="text-align: left">&gt; instFamily</td>
<td style="text-align: left">String</td>
<td style="text-align: left">No</td>
<td>Instrument family</td>
</tr>
</tbody></table>
<blockquote>
<p>Successful Response Example</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
   </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1512"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"event"</span><span class="p">:</span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"arg"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"channel"</span><span class="p">:</span><span class="s2">"adl-warning"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instType"</span><span class="p">:</span><span class="s2">"FUTURES"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instFamily"</span><span class="p">:</span><span class="s2">"BTC-USDT"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nl">"connId"</span><span class="p">:</span><span class="s2">"48d8960a"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<blockquote>
<p>Failure Response Example</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
   </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1512"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"event"</span><span class="p">:</span><span class="s2">"error"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"msg"</span><span class="p">:</span><span class="s2">"Illegal request: { </span><span class="se">\"</span><span class="s2">event</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">subscribe</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">arg</span><span class="se">\"</span><span class="s2">: { </span><span class="se">\"</span><span class="s2">channel</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">adl-warning</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">instType</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">FUTURES</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">instFamily</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">BTC-USDT</span><span class="se">\"</span><span class="s2"> } }"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"code"</span><span class="p">:</span><span class="s2">"60012"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"connId"</span><span class="p">:</span><span class="s2">"48d8960a"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div><h4 id="public-data-websocket-adl-warning-channel-response-parameters">Response parameters</h4>
<table><thead>
<tr>
<th style="text-align: left">Parameter</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Required</th>
<th style="text-align: left">Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">id</td>
<td style="text-align: left">String</td>
<td style="text-align: left">No</td>
<td style="text-align: left">Unique identifier of the message</td>
</tr>
<tr>
<td style="text-align: left">event</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Yes</td>
<td style="text-align: left">Event<br/><code>subscribe</code><br/><code>unsubscribe</code><br/><code>error</code></td>
</tr>
<tr>
<td style="text-align: left">arg</td>
<td style="text-align: left">Object</td>
<td style="text-align: left">No</td>
<td style="text-align: left">Subscribed channel</td>
</tr>
<tr>
<td style="text-align: left">&gt; channel</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Yes</td>
<td style="text-align: left">Channel name<br/><code>adl-warning</code></td>
</tr>
<tr>
<td style="text-align: left">&gt; instType</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Yes</td>
<td style="text-align: left">Instrument type</td>
</tr>
<tr>
<td style="text-align: left">&gt; instFamily</td>
<td style="text-align: left">String</td>
<td style="text-align: left">No</td>
<td style="text-align: left">Instrument family</td>
</tr>
<tr>
<td style="text-align: left">code</td>
<td style="text-align: left">String</td>
<td style="text-align: left">No</td>
<td style="text-align: left">Error code</td>
</tr>
<tr>
<td style="text-align: left">msg</td>
<td style="text-align: left">String</td>
<td style="text-align: left">No</td>
<td style="text-align: left">Error message</td>
</tr>
<tr>
<td style="text-align: left">connId</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Yes</td>
<td style="text-align: left">WebSocket connection ID</td>
</tr>
</tbody></table>
<blockquote>
<p>Push Data Example</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
   </span><span class="nl">"arg"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"channel"</span><span class="p">:</span><span class="s2">"adl-warning"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instType"</span><span class="p">:</span><span class="s2">"FUTURES"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instFamily"</span><span class="p">:</span><span class="s2">"BTC-USDT"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nl">"data"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nl">"maxBal"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
         </span><span class="nl">"adlRecBal"</span><span class="p">:</span><span class="s2">"8000.0"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"bal"</span><span class="p">:</span><span class="s2">"280784384.9564228289548144"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"instType"</span><span class="p">:</span><span class="s2">"FUTURES"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"ccy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"instFamily"</span><span class="p">:</span><span class="s2">"BTC-USDT"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"maxBalTs"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
         </span><span class="nl">"adlType"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
         </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"normal"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"adlBal"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"ts"</span><span class="p">:</span><span class="s2">"1700210763001"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div><h4 id="public-data-websocket-adl-warning-channel-push-data-parameters">Push data parameters</h4>
<table><thead>
<tr>
<th style="text-align: left">Parameter</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">arg</td>
<td style="text-align: left">Object</td>
<td style="text-align: left">Subscribed channel</td>
</tr>
<tr>
<td style="text-align: left">&gt; channel</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Channel name<br/><code>adl-warning</code></td>
</tr>
<tr>
<td style="text-align: left">&gt; instType</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Instrument type</td>
</tr>
<tr>
<td style="text-align: left">&gt; instFamily</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Instrument family</td>
</tr>
<tr>
<td style="text-align: left">data</td>
<td style="text-align: left">Array of objects</td>
<td style="text-align: left">Subscribed data</td>
</tr>
<tr>
<td style="text-align: left">&gt; instType</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Instrument type</td>
</tr>
<tr>
<td style="text-align: left">&gt; instFamily</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Instrument family</td>
</tr>
<tr>
<td style="text-align: left">&gt; state</td>
<td style="text-align: left">String</td>
<td style="text-align: left">state <br/><code>normal</code> <br/><code>warning</code> <br/><code>adl</code></td>
</tr>
<tr>
<td style="text-align: left">&gt; bal</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Real-time insurance fund balance</td>
</tr>
<tr>
<td style="text-align: left">&gt; ccy</td>
<td style="text-align: left">String</td>
<td style="text-align: left">The corresponding currency of insurance fund balance</td>
</tr>
<tr>
<td style="text-align: left">&gt; maxBal</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Maximum insurance fund balance in the past eight hours <br/><br/>Applicable when state is <code>warning</code> or <code>adl</code></td>
</tr>
<tr>
<td style="text-align: left">&gt; maxBalTs</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Timestamp when insurance fund balance reached maximum in the past eight hours, Unix timestamp format in milliseconds, e.g. <code>1597026383085</code></td>
</tr>
<tr>
<td style="text-align: left">&gt; adlType</td>
<td style="text-align: left">String</td>
<td style="text-align: left">ADL related events <br/><code>rate_adl_start</code>: ADL begins due to high insurance fund decline rate <br/><code>bal_adl_start</code>: ADL begins due to insurance fund balance falling <br/><code>pos_adl_start</code>ï¼šADL begins due to the volume of liquidation orders falls to a certain level (only applicable to premarket symbols) <br/><code>adl_end</code>: ADL ends</td>
</tr>
<tr>
<td style="text-align: left">&gt; adlBal</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Insurance fund balance that triggers ADL</td>
</tr>
<tr>
<td style="text-align: left">&gt; adlRecBal</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Insurance fund balance that turns off ADL</td>
</tr>
<tr>
<td style="text-align: left">&gt; ts</td>
<td style="text-align: left">String</td>
<td style="text-align: left">Data push time, Unix timestamp format in milliseconds, e.g. <code>1597026383085</code></td>
</tr>
<tr>
<td style="text-align: left">&gt; decRate</td>
<td style="text-align: left">String</td>
<td style="text-align: left"><del>Real-time insurance fund decline rate (compare bal and maxBal) <br/><br/>Applicable when state is <code>warning</code> or <code>adl</code></del>(Deprecated)</td>
</tr>
<tr>
<td style="text-align: left">&gt; adlRate</td>
<td style="text-align: left">String</td>
<td style="text-align: left"><del>Insurance fund decline rate that triggers ADL</del>(Deprecated)</td>
</tr>
<tr>
<td style="text-align: left">&gt; adlRecRate</td>
<td style="text-align: left">String</td>
<td style="text-align: left"><del>Insurance fund decline rate that turns off ADL</del>(Deprecated)</td>
</tr>
</tbody></table>
